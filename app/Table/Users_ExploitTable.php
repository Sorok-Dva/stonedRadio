<?php
/**
 * @Author  : Created by Llyam Garcia.
 * @Nick    : Liightman
 * @Date    : 14/08/2015
 * @Time    : 16:50
 * @File    : Users_ExploitTable.php
 * @Version : 1.0
 */

namespace App\Table;
use \Core\Table\Table;

class Users_ExploitTable extends Table {

    /**
     * Vérifie si l'utilisateur a déjà l'exploit
     * @param $exploit string Le nom de l'exploit
     * @param $level int Le niveau obtenu
     * @return mixed
     */
    public function checkIfAlreadyHad($exploit, $level){
        return $this->query("SELECT * FROM users_exploits WHERE type='{$exploit}' AND lvl='{$level}' AND user_id = '".$_SESSION['user_id']."' ");
    }

    /**
     * Vérifie que l'exploit a était créer (suite à la migration vers la V4)
     * @param $exploit tring Le nom de l'exploit
     * @return mixed
     */
    Public function checkIfCreated($exploit){
        return $this->query("SELECT * FROM users_exploits WHERE type='{$exploit}'  AND user_id = '".$_SESSION['user_id']."' ");
    }

    /**
     * Exploit pour les utilisateur des Dédicaces
     */
    public function ExploitDedi(){
        return $this->query("SELECT * FROM dedi_v2 WHERE pseudo = '".$_SESSION['pseudo']."' ", null, true);
    }


}