var urlInteragir = "/app/ajax/JQuery.php";function prepend_double_compte() {	$( "#dialog_moderation" ).empty();	$( "#dialog_moderation" ).append('<h3 style="text-align:center">Vérification de doubles compte sur une même adresse IP</h3><hr class="moderation"><br><br>Commencez à taper un pseudo ici : <br><br><input type="text" id="check_dc"> <input type="button" value="Valider" onclick="double_compte()"/>');	$( "#dialog_moderation" ).dialog( "open");		}function double_compte() {	var player = $('#check_dc').val();		$( "#dialog_moderation" ).empty();	$( "#dialog_moderation" ).append('<h3 style="text-align:center">Vérification de doubles compte sur une même adresse IP</h3><hr class="moderation"><br><br>Chargement des doubles comptes sur l\'adresse IP de '+player+'');	$( "#dialog_moderation" ).dialog( "open");		$.post(urlInteragir,{		"action" : "get_same_ip_accounts", "joueur" : player}, function(data) {						if (data.error == "doesnt_exist") {				$("#dialog_moderation").empty();				$("#dialog_moderation").append('<div style="text-align:center"><h3>Ce joueur n\'existe pas.</h3><br/><span onclick="prepend_double_compte()" class="spanLink">Retour à la recherche des doubles comptes</span></div>')			} else {				$("#dialog_moderation").empty();				$("#dialog_moderation").append(data.same_ip_accounts);				$("#dialog_moderation").dialog('open');			}		}, 'json');}function prepend_antecedents() {	$( "#dialog_moderation" ).empty();	$( "#dialog_moderation" ).append('<h3 style="text-align:center">Voir les antécédents de modération d\'un joueur</h3><hr class="moderation"><br><br>Commencez à taper un pseudo ici : <br><br><input type="text" id="check_ant"> <input type="button" value="Valider" onclick="antecedents()"/>');	$( "#dialog_moderation" ).dialog( "open");	}function antecedents() {	var player = $('#check_ant').val();		$( "#dialog_moderation" ).empty();	$( "#dialog_moderation" ).append('<h3 style="text-align:center">Chargement des antécédents de '+player+' en cours</h3>');	$( "#dialog_moderation" ).dialog( "open");		$.post(urlInteragir,{		"action" : "past_facts", "joueur" : player}, function(data) {						if (data.error == "doesnt_exist") {				$("#dialog_moderation").empty();				$("#dialog_moderation").append('<div style="text-align:center"><h3>Ce joueur n\'existe pas.</h3><br/><span onclick="prepend_antecedents()" class="spanLink">Retour à la recherche des antécédents</span></div>')			} else {				$("#dialog_moderation").empty();				$("#dialog_moderation").append(data.past_facts);				$("#dialog_moderation").dialog('open');			}		}, 'json');}function prepend_avertir () {	$( "#dialog_moderation" ).empty();	$( "#dialog_moderation" ).append('<h3 style="text-align:center">Avertir un joueur</h3><hr class="moderation"><br><br>Commencez à taper un pseudo ici : <br><br><input type="text" id="averto"> <input type="button" value="Valider" onclick="avertir()"/>');	$( "#dialog_moderation" ).dialog( "open");	}function avertir(){		var player = $('#averto').val();		$( "#dialog_moderation" ).empty();	$( "#dialog_moderation" ).append('<h3 style="text-align:center">Chargement du formulaire d\'avertissement</h3><hr class="moderation">');	$( "#dialog_moderation" ).dialog( "open");		$.post(urlInteragir,{		"action" : "past_facts", "joueur" : player}, function(data) {						if (data.error == "doesnt_exist") {				$("#dialog_moderation").empty();				$("#dialog_moderation").append('<div style="text-align:center"><h3>Ce joueur n\'existe pas.</h3><br/><span onclick="prepend_antecedents()" class="spanLink">Retour à la recherche des antécédents</span></div>')			} else {				$("#dialog_moderation").empty();				$("#dialog_moderation").append("A venir");				$("#dialog_moderation").dialog('open');			}		}, 'json');}function prepend_bannir () {	}function modifier() {	}function prependNew() {	$("#dialog").empty();	$("#dialog").append('<h3 style="text-align:center"> Ajouter une new</h3><hr class="moderation">'+	'<form autocomplete="off" id="login-form">'+		'<div class="form-group">'+			'<label for="labelTitre" class="sr-only">Titre</label>'+			'<input type="text" id="titreNew" class="form-control" placeholder="Titre de la new" maxlength="25">'+		'</div>'+		'<div class=\"form-group\">'+			'<label for=\"labelNew\" class=\"sr-only\">Contenue de la new</label>'+			'<textarea maxlength="3000" id="contenuNew" class="form-control" style="height:150px; resize:vertical;"></textarea>'+		'</div>'+		'<input type="button" id="btn-login" class="btn btn-custom btn-lg btn-block" value="Envoyer la new" onClick="New()">'+	'</form>');	$("#dialog").dialog('open');}function New() {	var titre = $("#titreNew").val();	var contenu = $("#contenuNew").val();	$.post(urlInteragir,{		"action" : "addNew", "titre" : titre, "new": contenu}, function(data) {						if (data.fait == "ok") {				$("#dialog").empty();				$("#dialog").append('<h3 style="text-align:center"> Ajouter une new</h3><hr class="moderation"> Votre new à bien était poster.')				$("#dialog").dialog('open');			}		}, 'json');}function prependAnnonce() {	$("#dialog").empty();	$("#dialog").append('<h3 style="text-align:center"> Ajouter une annonce</h3><hr class="moderation">'+	'<form autocomplete="off" id="login-form">'+		'<div class=\"form-group\">'+			'<label for=\"labelAnnonce\" class=\"sr-only\">Contenue de l\'annonce (255 caractères maximum)</label>'+			'<textarea maxlength="3000" id="contenuAnnonce" class="form-control" style="height:150px; resize:vertical;" placeholder="Contenue de l\'annonce (255 caractères maximum)"></textarea>'+		'</div>'+		'<div class=\"form-group\">'+			'<label for=\"labelDuree\">Durée de l\'annonce</label>'+			'<select class="form-control" id="duree">'+				'<option value="1">15 secondes</option>'+				'<option value="2">30 secondes</option>'+				'<option value="3">1 minute</option>'+				'<option value="4">3 minutes</option>'+				'<option value="5">5 minutes</option>'+			'</select>'+		'</div>'+		'<div class=\"form-group\">'+			'<label for=\"labelAdmin\"">Annonce administratif?</label>'+			'<select class="form-control" id="admin">'+				'<option value="0">Non</option>'+				'<option value="1">Oui</option>'+			'</select>'+		'</div>'+		'<input type="button" id="btn-login" class="btn btn-custom btn-lg btn-block" value="Créer l\'annonce" onClick="Annonce()">'+	'</form>');	$("#dialog").dialog('open');}function Annonce() {	var annonce = $("#contenuAnnonce").val();	var duree = $("#duree").val();	var admin = $("#admin").val();	$.post(urlInteragir,{		"action" : "addAnnonce", "annonce" : annonce, "duree": duree,"administratif": admin}, function(data) {						if (data.fait == "ok") {				$("#dialog").empty();				$("#dialog").append('<h3 style="text-align:center"> Ajouter une annonce</h3><hr class="moderation"> Votre annonce a bien était créer.')				$("#dialog").dialog('open');			} else {				$("#dialog").empty();				$("#dialog").append('<h3 style="text-align:center"> Ajouter une annonce</h3><hr class="moderation"> Une erreur est survenue.')				$("#dialog").dialog('open');			}		}, 'json');}function Moderation_rapide(commande, pseudo_a_moderer, acces_modo) {	// Afficher les bans disponibles	if (commande == "display_ban") {		$( "#dialog" ).empty();		var options_ban = '<input  type="hidden" id="pseudoban" value="'+pseudo_a_moderer+'"/>'+			'Choisir le motif : <select id="motif">'+			'<option value="1"> FLOOD </option>'+			'<option value="2"> Comportement </option>'+			'<option value="3"> Double-Compte </option>'+			'<option value="4"> Dévoilement d\'infos IRL </option>'+			'<option value="5"> Contournement de ban </option>'+			'<option value="-1"> BANNIR DEFINITIVEMENT </option></select><br><br>';		//var le_motif = '<br><h4>Votre commentaire à l\'égard de <b>'+pseudo_a_moderer+'</b></h4><textarea id="commentaire" style="margin: 2px; width: 500px; height: 120px; resize: none; overflow: auto;"></textarea>';		$( "#dialog" ).append( "<span style='text-align:center'><a class='lien_infos' onclick=\"Profile('"+pseudo_a_moderer+"')\">Retour au profil de "+pseudo_a_moderer+"</a></span><br/><br/>");		$( "#dialog" ).append(options_ban+'<span style="border:none;width: 500px; border-radius:0"class="btn btn-danger" onclick="Moderation_rapide(\'submit_ban\', \''+pseudo_a_moderer+'\');"><span class="glyphicon glyphicon-exclamation-sign"></span> Bannir '+pseudo_a_moderer+'</span>');		$( "#dialog" ).dialog( "option", "position", "center" );		$( "#dialog" ).dialog( "open");	}	// Soumettre un ban	else if (commande == "submit_ban") {		if (confirm("Êtes-vous sur de vouloir bannir "+pseudo_a_moderer+" pour le motif choisi ?")) {			var motif = $('#motif').val();			//var commentaire = $('#commentaire').val();			$.post(urlInteragir,			{"action": "bannir_joueur", "joueur": pseudo_a_moderer, "motif": motif /* "commentaire": commentaire*/},			function(data) {				if (data != "error") {					$( "#dialog" ).empty();					$( "#dialog" ).append('Confirmation : le joueur a bien été banni pour le motif demandé.');					$( "#dialog" ).dialog( "option", "position", "center" );				}			}, 'json');		}	}	// Ajouter un joueur à la Stalklist	else if (commande == "display_stalk") {		$( "#dialog" ).empty();		$( "#dialog" ).append( "Indiquez la raison de la surveillance : <input type=\"text\" id=\"raison_surveillance\"><br /><input type=\"submit\" id=\"surveillance_submit\" onclick=\"Moderation_rapide('stalk', '"+pseudo_a_moderer+"')\">" );		$( "#dialog" ).dialog( "open");	}	// Ajouter un joueur à la Stalklist	else if (commande == "stalk") {		if ($("#raison_surveillance").length) {			var raison_surveillance = $("#raison_surveillance").val();		}		else {			var raison_surveillance = "none";		}				if (raison_surveillance.length > 3) {			$.post(urlInteragir,			{"action": commande, "joueur": pseudo_a_moderer, "raison": raison_surveillance},			function(data) {				if (data.fait == "added") {					var message_de_confirmation = "<div style='padding-top:10px;font-size:14px;'>Confirmation : "+pseudo_a_moderer+" a bien été ajouté à la liste des <b>joueurs sous surveillance</b>.</div>";				}				else if (data.fait == "removed") {					var message_de_confirmation = "<div style='padding-top:10px;font-size:14px;'>Confirmation : "+pseudo_a_moderer+" a bien été retiré de la liste des <b>joueurs sous surveillance</b>.</div>";				}				$( "#dialog" ).empty();				$( "#dialog" ).append( "<span style='text-align:center'><a class='lien_infos' onclick=\"Infos('"+pseudo_a_moderer+"')\">Retour au profil de "+pseudo_a_moderer+"</a></span>");				$( "#dialog" ).append( message_de_confirmation );				$( "#dialog" ).dialog( "option", "position", "center" );				$( "#dialog" ).dialog( "open");			}, 'json');		}		else {			$( "#dialog" ).empty();			$( "#dialog" ).append( "Indiquez la raison* de la surveillance : <input type=\"text\" id=\"raison_surveillance\"><br /><input type=\"submit\" id=\"surveillance_submit\" onclick=\"Moderation_rapide('stalk', '"+pseudo_a_moderer+"')\"><br /><br />* Obligatoire" );			$( "#dialog" ).dialog( "open");		}	}	// Voir les antécédents d'un joueur	else if (commande == "past_facts") {		$( "#dialog" ).empty();		$( "#dialog" ).append( "<div><br/><br/>Chargement des antécédents en cours...</div>" );		$( "#dialog" ).dialog( "open");				$.post(urlInteragir,		{"action": commande, "joueur": pseudo_a_moderer},		function(data) {			console.log("Développeur : Tableau data = "+JSON.stringify(data));			if (data.fait == "ok") {				$( "#dialog" ).empty();				$( "#dialog" ).append( "<span class='spanLink' onclick=\"Profile('"+pseudo_a_moderer+"')\">Retour au profil de "+pseudo_a_moderer+"</span>");				$( "#dialog" ).append( "<div style='padding-top:10px;font-size:12px;'>"+data.past_facts+"</div>" );				$( "#dialog" ).dialog( "option", "position", "center" );				$( "#dialog" ).dialog( "open");			}		}, 'json');	}	// Voir les comptes sur la même IP qu'un joueur	else if (commande == "get_same_ip_accounts") {		$( "#dialog" ).empty();		$( "#dialog" ).append( "<div><br/><br/>Chargement des comptes sur la même IP en cours...</div>" );		$( "#dialog" ).dialog( "open");		$.post(urlInteragir,		{"action": commande, "joueur": pseudo_a_moderer},		function(data) {			if (data.fait == "ok") {				$( "#dialog" ).empty();				$( "#dialog" ).append( "<span class='spanLink' onclick=\"Profile('"+pseudo_a_moderer+"')\">◄ Retour au profil de "+pseudo_a_moderer+"</span>");				$( "#dialog" ).append( "<div style='padding-top:10px;font-size:15px;'>"+data.same_ip_accounts+"</div>" );				$( "#dialog" ).dialog( "option", "position", "center" );				$( "#dialog" ).dialog( "open");			}			else {				$( "#dialog" ).empty();				$( "#dialog" ).append( "<span style='text-align:center'><a class='lien_infos' onclick=\"Profile('"+pseudo_a_moderer+"')\">Retour au profil de "+pseudo_a_moderer+"</a></span>");				$( "#dialog" ).append( "<div style='padding-top:10px;font-size:15px;'>Vous ne pouvez pas consulter cette information (Superviseurs ONLY).</div>" );				$( "#dialog" ).dialog( "option", "position", "center" );				$( "#dialog" ).dialog( "open");			}		}, 'json');	}}